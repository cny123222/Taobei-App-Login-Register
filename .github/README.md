# GitHub Actions CI/CD é…ç½®è¯´æ˜

## æ¦‚è¿°

æœ¬é¡¹ç›®é…ç½®äº†å®Œæ•´çš„ GitHub Actions CI/CD æµæ°´çº¿ï¼Œå¯ä»¥åœ¨æ¯æ¬¡æäº¤æ—¶è‡ªåŠ¨è¿è¡Œå‰åç«¯æµ‹è¯•å’Œé›†æˆæµ‹è¯•ã€‚

## å·¥ä½œæµæ–‡ä»¶

### 1. `ci.yml` - ä¸»è¦ CI/CD æµæ°´çº¿

**è§¦å‘æ¡ä»¶ï¼š**
- æ¨é€åˆ° `master`ã€`main`ã€`develop` åˆ†æ”¯
- åˆ›å»ºé’ˆå¯¹è¿™äº›åˆ†æ”¯çš„ Pull Request

**åŒ…å«çš„ä½œä¸šï¼š**

#### ğŸ”§ Backend Tests
- å®‰è£…åç«¯ä¾èµ–
- è¿è¡Œåç«¯å•å…ƒæµ‹è¯•
- ç”Ÿæˆæµ‹è¯•è¦†ç›–ç‡æŠ¥å‘Š
- ä¸Šä¼ æµ‹è¯•ç»“æœ

#### ğŸ¨ Frontend Tests  
- å®‰è£…å‰ç«¯ä¾èµ–
- è¿è¡Œå‰ç«¯å•å…ƒæµ‹è¯•
- ç”Ÿæˆæµ‹è¯•è¦†ç›–ç‡æŠ¥å‘Š
- ä¸Šä¼ æµ‹è¯•ç»“æœ

#### ğŸ”— Integration Tests
- å¯åŠ¨åç«¯æœåŠ¡å™¨
- æ„å»ºå¹¶å¯åŠ¨å‰ç«¯æœåŠ¡å™¨
- ç­‰å¾…æœåŠ¡å°±ç»ª
- è¿è¡Œé›†æˆæµ‹è¯•
- è¿è¡Œç³»ç»ŸéªŒè¯
- æ¸…ç†æœåŠ¡è¿›ç¨‹

#### ğŸ—ï¸ Build Verification
- éªŒè¯å‰ç«¯æ„å»ºè¿‡ç¨‹
- æ£€æŸ¥æ„å»ºäº§ç‰©
- ä¸Šä¼ æ„å»ºæ–‡ä»¶

#### ğŸ“‹ Test Summary
- æ±‡æ€»æ‰€æœ‰æµ‹è¯•ç»“æœ
- ç”Ÿæˆæµ‹è¯•æŠ¥å‘Š
- æä¾›æµ‹è¯•çŠ¶æ€æ¦‚è§ˆ

### 2. `test.yml` - å¿«é€Ÿæµ‹è¯•å·¥ä½œæµ

**è§¦å‘æ¡ä»¶ï¼š**
- æ‰‹åŠ¨è§¦å‘ï¼ˆworkflow_dispatchï¼‰

**ç”¨é€”ï¼š**
- å¿«é€ŸéªŒè¯åŸºæœ¬åŠŸèƒ½
- è°ƒè¯• CI/CD é…ç½®
- æµ‹è¯•ç¯å¢ƒéªŒè¯

## æœ¬åœ°æµ‹è¯•è„šæœ¬

é¡¹ç›®æ ¹ç›®å½•çš„ `package.json` åŒ…å«ä»¥ä¸‹æµ‹è¯•è„šæœ¬ï¼š

```json
{
  "scripts": {
    "test": "npm run test:backend && npm run test:frontend",
    "test:backend": "cd backend && npm test",
    "test:frontend": "cd frontend && npm test",
    "test:integration": "node integration-test.js",
    "test:system": "node verify-system.js"
  }
}
```

## ä½¿ç”¨æ–¹æ³•

### è‡ªåŠ¨è§¦å‘

1. **æ¨é€ä»£ç åˆ°ä¸»åˆ†æ”¯ï¼š**
   ```bash
   git push origin master
   ```

2. **åˆ›å»º Pull Requestï¼š**
   - åœ¨ GitHub ä¸Šåˆ›å»º PR
   - CI/CD ä¼šè‡ªåŠ¨è¿è¡Œ

### æ‰‹åŠ¨è§¦å‘

1. è®¿é—® GitHub ä»“åº“çš„ Actions é¡µé¢
2. é€‰æ‹© "Quick Test" å·¥ä½œæµ
3. ç‚¹å‡» "Run workflow" æŒ‰é’®

### æŸ¥çœ‹ç»“æœ

1. **GitHub Actions é¡µé¢ï¼š**
   - è®¿é—® `https://github.com/your-username/your-repo/actions`
   - æŸ¥çœ‹å·¥ä½œæµè¿è¡ŒçŠ¶æ€å’Œæ—¥å¿—

2. **æµ‹è¯•æŠ¥å‘Šï¼š**
   - åœ¨ Actions è¿è¡Œå®Œæˆåä¸‹è½½ Artifacts
   - åŒ…å«æµ‹è¯•è¦†ç›–ç‡æŠ¥å‘Šå’Œè¯¦ç»†ç»“æœ

3. **çŠ¶æ€å¾½ç« ï¼š**
   å¯ä»¥åœ¨ README ä¸­æ·»åŠ çŠ¶æ€å¾½ç« ï¼š
   ```markdown
   ![CI/CD](https://github.com/your-username/your-repo/workflows/CI/CD%20Pipeline/badge.svg)
   ```

## é…ç½®è¯´æ˜

### ç¯å¢ƒå˜é‡

```yaml
env:
  NODE_VERSION: '18'
  BACKEND_PORT: 3001
  FRONTEND_PORT: 4173
```

### ä¾èµ–ç¼“å­˜

- ä½¿ç”¨ npm ç¼“å­˜åŠ é€Ÿä¾èµ–å®‰è£…
- åˆ†åˆ«ç¼“å­˜å‰åç«¯ä¾èµ–

### æœåŠ¡å¯åŠ¨

- åç«¯ï¼š`npm start`ï¼ˆç«¯å£ 3001ï¼‰
- å‰ç«¯ï¼š`npm run preview`ï¼ˆç«¯å£ 4173ï¼‰
- ä½¿ç”¨ `wait-on` ç­‰å¾…æœåŠ¡å°±ç»ª

### æµ‹è¯•è¶…æ—¶

- é»˜è®¤è¶…æ—¶ï¼š60 ç§’
- å¯åœ¨é…ç½®æ–‡ä»¶ä¸­è°ƒæ•´

## æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

1. **ä¾èµ–å®‰è£…å¤±è´¥ï¼š**
   - æ£€æŸ¥ `package-lock.json` æ–‡ä»¶
   - ç¡®ä¿ Node.js ç‰ˆæœ¬å…¼å®¹

2. **æµ‹è¯•è¶…æ—¶ï¼š**
   - å¢åŠ  `wait-on` è¶…æ—¶æ—¶é—´
   - æ£€æŸ¥æœåŠ¡å¯åŠ¨æ—¥å¿—

3. **ç«¯å£å†²çªï¼š**
   - ç¡®ä¿ç«¯å£é…ç½®æ­£ç¡®
   - æ£€æŸ¥æœåŠ¡æ˜¯å¦æ­£å¸¸å¯åŠ¨

### è°ƒè¯•æ–¹æ³•

1. **æŸ¥çœ‹è¯¦ç»†æ—¥å¿—ï¼š**
   - åœ¨ Actions é¡µé¢å±•å¼€æ¯ä¸ªæ­¥éª¤
   - æŸ¥çœ‹å®Œæ•´çš„æ§åˆ¶å°è¾“å‡º

2. **æœ¬åœ°å¤ç°ï¼š**
   ```bash
   # è¿è¡Œç›¸åŒçš„æµ‹è¯•å‘½ä»¤
   npm run test
   npm run test:integration
   npm run test:system
   ```

3. **æ‰‹åŠ¨è§¦å‘æµ‹è¯•ï¼š**
   - ä½¿ç”¨ Quick Test å·¥ä½œæµ
   - é€æ­¥éªŒè¯æ¯ä¸ªç»„ä»¶

## æœ€ä½³å®è·µ

1. **æäº¤å‰æœ¬åœ°æµ‹è¯•ï¼š**
   ```bash
   npm run test
   ```

2. **å°æ­¥æäº¤ï¼š**
   - é¿å…å¤§é‡æ›´æ”¹ä¸€æ¬¡æäº¤
   - ä¾¿äºå®šä½é—®é¢˜

3. **ç›‘æ§æµ‹è¯•ç»“æœï¼š**
   - åŠæ—¶æŸ¥çœ‹ CI/CD çŠ¶æ€
   - ä¿®å¤å¤±è´¥çš„æµ‹è¯•

4. **ä¿æŒä¾èµ–æ›´æ–°ï¼š**
   - å®šæœŸæ›´æ–°ä¾èµ–ç‰ˆæœ¬
   - ç¡®ä¿å®‰å…¨æ€§å’Œå…¼å®¹æ€§

## æ‰©å±•é…ç½®

### æ·»åŠ æ–°çš„æµ‹è¯•ç±»å‹

1. åœ¨ç›¸åº”çš„ `package.json` ä¸­æ·»åŠ è„šæœ¬
2. åœ¨ `ci.yml` ä¸­æ·»åŠ å¯¹åº”çš„æ­¥éª¤
3. é…ç½®é€‚å½“çš„ç¯å¢ƒå’Œä¾èµ–

### éƒ¨ç½²é…ç½®

å¯ä»¥åœ¨ `ci.yml` ä¸­æ·»åŠ éƒ¨ç½²æ­¥éª¤ï¼š

```yaml
deploy:
  runs-on: ubuntu-latest
  needs: [backend-tests, frontend-tests, integration-tests]
  if: github.ref == 'refs/heads/master'
  steps:
    # éƒ¨ç½²æ­¥éª¤
```

### é€šçŸ¥é…ç½®

å¯ä»¥æ·»åŠ  Slackã€é‚®ä»¶ç­‰é€šçŸ¥ï¼š

```yaml
- name: Notify on failure
  if: failure()
  uses: 8398a7/action-slack@v3
  with:
    status: failure
```