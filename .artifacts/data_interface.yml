- type: Database
  id: DB-FindUserByPhone
  description: 根据手机号查找用户记录。
  dependencies:
    - none
  acceptanceCriteria:
    - 如果手机号存在，返回用户记录。
    - 如果手机号不存在，返回null或空结果。
    - 查询应该是大小写不敏感的。
  changeLog:
    - date: "2025-01-27"
      description: "初始创建。"

- type: Database
  id: DB-CreateUser
  description: 在数据库中创建一个新的用户记录。
  dependencies:
    - none
  acceptanceCriteria:
    - 成功执行后，users表中会增加一条新记录。
    - 如果手机号已存在，操作应失败并抛出唯一性约束错误。
    - 新用户记录应包含手机号、创建时间等基本信息。
  changeLog:
    - date: "2025-01-27"
      description: "初始创建。"

- type: Database
  id: DB-SaveVerificationCode
  description: 保存验证码到数据库，包含手机号、验证码和过期时间。
  dependencies:
    - none
  acceptanceCriteria:
    - 验证码记录应包含手机号、验证码、创建时间和过期时间。
    - 验证码有效期为60秒。
    - 同一手机号的新验证码应覆盖旧的验证码。
  changeLog:
    - date: "2025-01-27"
      description: "初始创建。"

- type: Database
  id: DB-VerifyCode
  description: 验证手机号对应的验证码是否正确且未过期。
  dependencies:
    - none
  acceptanceCriteria:
    - 验证码必须完全匹配。
    - 验证码必须在有效期内（60秒）。
    - 验证成功后应删除或标记验证码为已使用。
    - 如果验证码不存在、错误或过期，返回验证失败。
  changeLog:
    - date: "2025-01-27"
      description: "初始创建。"

- type: Database
  id: DB-CleanExpiredCodes
  description: 清理数据库中已过期的验证码记录。
  dependencies:
    - none
  acceptanceCriteria:
    - 删除所有过期时间早于当前时间的验证码记录。
    - 操作应该是幂等的，可以安全地重复执行。
  changeLog:
    - date: "2025-01-27"
      description: "初始创建。"